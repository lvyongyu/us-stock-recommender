"""
模拟投资系统需求规格说明

功能概述：
在现有股票分析系统基础上，添加虚拟交易和投资组合模拟功能，
让用户可以在无风险环境下测试投资策略和学习投资知识。

核心功能：
1. 模拟账户管理
2. 虚拟交易执行
3. 投资组合跟踪
4. 历史回测分析
5. 收益统计报表
"""

# 需求规格
SIMULATION_REQUIREMENTS = {
    "账户管理": {
        "初始资金": "用户可设置初始虚拟资金（默认$100,000）",
        "资金管理": "支持充值、提现操作",
        "账户状态": "显示总资产、可用资金、持仓市值",
        "交易记录": "完整的交易历史记录"
    },

    "交易功能": {
        "市场订单": "支持市价买入/卖出",
        "限价订单": "支持限价交易（预留接口）",
        "交易验证": "检查资金充足性、持仓数量",
        "实时价格": "使用最新股价进行交易"
    },

    "投资组合": {
        "持仓管理": "显示当前持仓、成本价、当前价、盈亏",
        "组合分析": "集成现有PortfolioAnalyzer进行分析",
        "再平衡": "支持模拟再平衡操作",
        "绩效评估": "计算收益率、最大回撤、夏普比率等"
    },

    "历史回测": {
        "时间选择": "可选择任意历史时间段",
        "策略回测": "回测不同投资策略的表现",
        "基准对比": "与市场指数（如S&P 500）对比",
        "详细报告": "生成回测报告和图表"
    },

    "学习功能": {
        "策略模板": "提供经典投资策略模板",
        "教育内容": "投资知识和风险教育",
        "模拟竞赛": "多人模拟投资竞赛",
        "进度跟踪": "学习进度和投资技能提升"
    }
}

# 技术架构
SYSTEM_ARCHITECTURE = {
    "数据层": {
        "模拟账户表": "存储用户模拟账户信息",
        "交易记录表": "存储所有虚拟交易记录",
        "持仓记录表": "存储当前持仓明细",
        "回测结果表": "存储历史回测数据"
    },

    "业务层": {
        "SimulationManager": "模拟账户和交易管理",
        "VirtualTrader": "虚拟交易执行引擎",
        "BacktestEngine": "历史回测引擎",
        "PerformanceCalculator": "收益和风险计算"
    },

    "表现层": {
        "账户仪表板": "账户概览和持仓展示",
        "交易界面": "股票买入/卖出操作",
        "回测界面": "历史回测设置和结果展示",
        "学习中心": "投资教育内容和练习"
    }
}

# 集成方案
INTEGRATION_PLAN = {
    "现有系统集成": {
        "StockInfoManager": "提供实时股价数据",
        "PortfolioAnalyzer": "复用投资组合分析功能",
        "RecommendationEngine": "提供交易建议",
        "PortfolioManager": "扩展为支持模拟账户"
    },

    "数据流": {
        "价格数据": "StockInfoManager → VirtualTrader",
        "分析结果": "PortfolioAnalyzer → SimulationManager",
        "交易信号": "RecommendationEngine → VirtualTrader"
    }
}